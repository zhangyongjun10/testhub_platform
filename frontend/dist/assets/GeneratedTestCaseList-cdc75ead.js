import{_ as P,C as u,e as g,r as A,o as d,c,b as t,N as p,P as v,ab as S,t as r,B as m,f as b,d as D,w as j,F as _,y as k,O as f,z as F,G as y,A as w}from"./index-054e2682.js";const V={name:"GeneratedTestCaseList",data(){return{isLoading:!1,tasks:[],selectedStatus:"",selectedTaskDetail:null,showAdoptModal:!1,isAdopting:!1,projects:[],projectVersions:[],allVersions:[],adoptForm:{title:"",description:"",project_id:null,priority:"low",test_type:"functional",status:"draft",preconditions:"",steps:"",expected_result:"",version_id:null},currentAdoptingTask:null,selectedTasks:[],isDeleting:!1,pagination:{currentPage:1,pageSize:10,total:0,pageSizeOptions:[10,20,50]},jumpPage:"",allStats:{total:0,completed:0,running:0,failed:0}}},computed:{availableVersions(){return this.adoptForm.project_id?this.projectVersions:this.allVersions},totalPages(){return Math.ceil(this.pagination.total/this.pagination.pageSize)},paginationInfo(){const s=(this.pagination.currentPage-1)*this.pagination.pageSize+1,e=Math.min(this.pagination.currentPage*this.pagination.pageSize,this.pagination.total);return`æ˜¾ç¤º ${s}-${e} æ¡ï¼Œå…± ${this.pagination.total} æ¡`},isAllSelected(){return this.tasks.length>0&&this.selectedTasks.length===this.tasks.length}},mounted(){this.loadTasks(),this.fetchProjects(),this.fetchAllVersions()},methods:{async loadTasks(){this.isLoading=!0;try{let s="/requirement-analysis/api/testcase-generation/";const e=new URLSearchParams;e.append("page",this.pagination.currentPage),e.append("page_size",this.pagination.pageSize),this.selectedStatus&&e.append("status",this.selectedStatus),e.toString()&&(s+="?"+e.toString());const a=await u.get(s);a.data.results?(this.tasks=a.data.results,this.pagination.total=a.data.count||0):(this.tasks=a.data||[],this.pagination.total=this.tasks.length),this.updateStats()}catch(s){console.error("åŠ è½½ä»»åŠ¡åˆ—è¡¨å¤±è´¥:",s),this.tasks=[],this.pagination.total=0}finally{this.isLoading=!1,this.selectedTasks=[]}},getSerialNumber(s){return(this.pagination.currentPage-1)*this.pagination.pageSize+s+1},toggleTaskSelection(s){const e=this.selectedTasks.indexOf(s);e>-1?this.selectedTasks.splice(e,1):this.selectedTasks.push(s)},isTaskSelected(s){return this.selectedTasks.includes(s)},toggleSelectAll(){this.isAllSelected?this.selectedTasks=[]:this.selectedTasks=this.tasks.map(s=>s.task_id)},async batchDeleteTasks(){if(this.selectedTasks.length===0){g.warning("è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„ä»»åŠ¡");return}if(!confirm(`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${this.selectedTasks.length} ä¸ªä»»åŠ¡å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))return;this.isDeleting=!0;let s=0,e=0;try{for(const a of this.selectedTasks)try{await u.delete(`/requirement-analysis/api/testcase-generation/${a}/`),s++}catch(n){console.error(`åˆ é™¤ä»»åŠ¡ ${a} å¤±è´¥:`,n),e++}s>0?g.success(`æˆåŠŸåˆ é™¤ ${s} ä¸ªä»»åŠ¡${e>0?`ï¼Œ${e} ä¸ªå¤±è´¥`:""}`):g.error("åˆ é™¤å¤±è´¥"),this.selectedTasks=[],this.loadTasks()}catch(a){console.error("æ‰¹é‡åˆ é™¤å¤±è´¥:",a),g.error("æ‰¹é‡åˆ é™¤å¤±è´¥: "+(a.message||"æœªçŸ¥é”™è¯¯"))}finally{this.isDeleting=!1}},updateStats(){this.loadAllStats()},async loadAllStats(){try{let s="/requirement-analysis/api/testcase-generation/";const e=new URLSearchParams;e.append("page_size","10000"),e.append("page","1"),this.selectedStatus&&e.append("status",this.selectedStatus),s+="?"+e.toString();const a=await u.get(s),n=a.data.results||a.data||[];this.allStats.total=n.length,this.allStats.completed=n.filter(i=>i.status==="completed").length,this.allStats.running=n.filter(i=>["pending","generating","reviewing"].includes(i.status)).length,this.allStats.failed=n.filter(i=>i.status==="failed").length}catch(s){console.error("è·å–ç»Ÿè®¡æ•°æ®å¤±è´¥:",s),this.allStats.total=this.pagination.total||0,this.allStats.completed=0,this.allStats.running=0,this.allStats.failed=0}},getStatusText(s){return{pending:"éœ€æ±‚åˆ†æä¸­",generating:"ç”¨ä¾‹ç¼–å†™ä¸­",reviewing:"ç”¨ä¾‹è¯„å®¡ä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥"}[s]||s},getTestCaseCount(s){if(!s.final_test_cases)return 0;const a=s.final_test_cases.split(`
`).filter(l=>l.trim());let n=0,i=!0,o=!1;for(let l of a)if(l.includes("|")&&!l.includes("--------")&&l.split("|").map(h=>h.trim()).filter(h=>h).length>1){if(i&&(i=!1,l.includes("æµ‹è¯•ç”¨ä¾‹ç¼–å·")||l.includes("ID")||l.includes("ç”¨ä¾‹ID")||l.includes("åœºæ™¯")||l.includes("æ­¥éª¤"))){o=!0;continue}n++,n>=1&&(o=!0)}if(o&&n>0)return n;let T=0;for(const l of a)(l.includes("æµ‹è¯•ç”¨ä¾‹")||l.includes("Test Case")||l.match(/^(\d+\.|æµ‹è¯•åœºæ™¯)/))&&T++;return T||0},viewTaskDetail(s){if(["pending","generating","reviewing"].includes(s.status)){g.info("ç”¨ä¾‹æ­£åœ¨ç”Ÿæˆä¸­ï¼Œè¯·ç¨åæŸ¥çœ‹ï¼");return}if(s.status==="completed"){const e=this.$router.resolve({name:"TaskDetail",params:{taskId:s.task_id}}).href;window.open(e,"_blank")}},async batchAdoptTask(s){var e,a;if(confirm(`ç¡®å®šè¦ä¸€é”®é‡‡çº³ä»»åŠ¡"${s.title}"çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å—ï¼Ÿ`))try{await u.post(`/requirement-analysis/api/testcase-generation/${s.task_id}/batch_adopt/`),g.success("ä¸€é”®é‡‡çº³æˆåŠŸï¼æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å·²å¯¼å…¥åˆ°æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨"),this.loadTasks()}catch(n){console.error("ä¸€é”®é‡‡çº³å¤±è´¥:",n),g.error("ä¸€é”®é‡‡çº³å¤±è´¥: "+(((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||n.message))}},async batchDiscardTask(s){var e,a;if(confirm(`ç¡®å®šè¦ä¸€é”®å¼ƒç”¨ä»»åŠ¡"${s.title}"çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))try{await u.post(`/requirement-analysis/api/testcase-generation/${s.task_id}/batch_discard/`),g.success("ä¸€é”®å¼ƒç”¨æˆåŠŸï¼è¯¥ä»»åŠ¡çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å·²åˆ é™¤"),this.loadTasks()}catch(n){console.error("ä¸€é”®å¼ƒç”¨å¤±è´¥:",n),g.error("ä¸€é”®å¼ƒç”¨å¤±è´¥: "+(((a=(e=n.response)==null?void 0:e.data)==null?void 0:a.message)||n.message))}},formatDateTime(s){return s?new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""},async fetchProjects(){try{const s=await u.get("/projects/list/");this.projects=s.data.results||[]}catch(s){console.error("è·å–é¡¹ç›®åˆ—è¡¨å¤±è´¥:",s)}},async fetchAllVersions(){try{const s=await u.get("/versions/");this.allVersions=s.data.results||s.data||[]}catch(s){console.error("è·å–æ‰€æœ‰ç‰ˆæœ¬åˆ—è¡¨å¤±è´¥:",s),this.allVersions=[]}},async fetchProjectVersions(s){if(!s){this.projectVersions=[];return}try{const e=await u.get(`/versions/projects/${s}/versions/`);this.projectVersions=e.data||[]}catch(e){console.error("è·å–é¡¹ç›®ç‰ˆæœ¬å¤±è´¥:",e),this.projectVersions=[]}},async adoptTestCase(s){this.currentAdoptingTestCase=s,this.adoptForm={title:s.title,description:s.title,project_id:null,priority:"low",test_type:"functional",status:"draft",preconditions:s.precondition||"",steps:s.test_steps||"",expected_result:s.expected_result||"",version_id:null},this.showAdoptModal=!0},async onAdoptProjectChange(){this.adoptForm.project_id?(await this.fetchProjectVersions(this.adoptForm.project_id),this.adoptForm.version_id&&(this.projectVersions.some(e=>e.id===this.adoptForm.version_id)||(this.adoptForm.version_id=null))):this.projectVersions=[]},async confirmAdopt(){if(!this.adoptForm.project_id){alert("è¯·é€‰æ‹©å½’å±é¡¹ç›®");return}if(!this.adoptForm.version_id){alert("è¯·é€‰æ‹©å…³è”ç‰ˆæœ¬");return}if(!this.adoptForm.title.trim()){alert("è¯·è¾“å…¥ç”¨ä¾‹æ ‡é¢˜");return}if(!this.adoptForm.expected_result.trim()){alert("è¯·è¾“å…¥é¢„æœŸç»“æœ");return}this.isAdopting=!0;try{const s={...this.adoptForm};s.priority||(s.priority="low"),s.version_id&&(s.version_ids=[s.version_id]),delete s.version_id,await u.post("/testcases/",s);try{await u.patch(`/requirement-analysis/api/test-cases/${this.currentAdoptingTestCase.id}/`,{status:"adopted"})}catch(e){console.warn("æ›´æ–°AIç”¨ä¾‹çŠ¶æ€å¤±è´¥:",e)}alert("ç”¨ä¾‹é‡‡çº³æˆåŠŸï¼å·²å¯¼å…¥åˆ°æµ‹è¯•ç”¨ä¾‹åˆ—è¡¨"),this.closeAdoptModal(),this.loadTestCases()}catch(s){console.error("é‡‡çº³ç”¨ä¾‹å¤±è´¥:",s),alert("é‡‡çº³ç”¨ä¾‹å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{this.isAdopting=!1}},async discardTestCase(s){if(confirm(`ç¡®å®šè¦å¼ƒç”¨æµ‹è¯•ç”¨ä¾‹"${s.title}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))try{await u.patch(`/requirement-analysis/api/test-cases/${s.id}/`,{status:"discarded"}),alert("ç”¨ä¾‹å·²å¼ƒç”¨"),this.loadTestCases()}catch(e){console.error("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥:",e),alert("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥ï¼Œè¯·é‡è¯•")}},closeAdoptModal(){this.showAdoptModal=!1,this.currentAdoptingTestCase=null,this.projectVersions=[]},getProjectName(s){const e=this.projects.find(a=>a.id===s);return e?e.name:""},onPageSizeChange(){this.pagination.currentPage=1,this.loadTasks()},goToPage(s){s>=1&&s<=this.totalPages&&(this.pagination.currentPage=s,this.loadTasks())},jumpToPage(){const s=parseInt(this.jumpPage);s>=1&&s<=this.totalPages?(this.pagination.currentPage=s,this.jumpPage="",this.loadTasks()):alert(`è¯·è¾“å…¥ 1-${this.totalPages} ä¹‹é—´çš„é¡µç `)},getVisiblePages(){const s=this.pagination.currentPage,e=this.totalPages,a=[];if(e<=7)for(let n=1;n<=e;n++)a.push(n);else if(s<=4){for(let n=1;n<=5;n++)a.push(n);a.push("..."),a.push(e)}else if(s>=e-3){a.push(1),a.push("...");for(let n=e-4;n<=e;n++)a.push(n)}else{a.push(1),a.push("...");for(let n=s-1;n<=s+1;n++)a.push(n);a.push("..."),a.push(e)}return a}}},M={class:"generated-testcase-list"},L={class:"filters-section"},z={class:"filter-card"},U={class:"filter-group"},q={class:"filter-actions"},I=["disabled"],x={key:0},N={key:1},E=["disabled"],B={key:0},G={key:1},H={key:0,class:"stats-section"},O={class:"stats-card"},R={class:"stat-item"},K={class:"stat-number"},J={class:"stat-item"},Q={class:"stat-number"},W={class:"stat-item"},X={class:"stat-number"},Y={class:"stat-item"},Z={class:"stat-number"},$={class:"testcases-section"},ee={key:0,class:"loading-state"},te={key:1,class:"empty-state"},se={key:2,class:"testcases-table"},le={class:"table-header"},ie={class:"header-cell checkbox-cell"},oe=["checked"],ae={class:"table-body"},ne={class:"body-cell checkbox-cell"},re=["checked","onChange"],de={class:"body-cell serial-cell"},ce={class:"body-cell task-id-cell"},pe={class:"body-cell requirement-name-cell"},ue={class:"requirement-name"},ge={class:"body-cell status-cell"},me={class:"body-cell count-cell"},he={class:"count-badge"},ve={class:"body-cell time-cell"},fe={class:"body-cell action-cell"},be={class:"action-buttons"},_e=["onClick"],ke=["onClick"],ye=["onClick"],Te={key:1,class:"pagination-section"},Ce={class:"pagination-info"},Se={class:"pagination-controls"},we={class:"page-size-selector"},Pe=["value"],Ae={class:"pagination-buttons"},De=["disabled"],je={class:"page-numbers"},Fe=["onClick"],Ve={key:1,class:"ellipsis"},Me=["disabled"],Le={class:"page-jumper"},ze=["max"],Ue={class:"modal-header"},qe={class:"modal-body"},Ie={class:"detail-item"},xe={class:"detail-item"},Ne={class:"detail-item"},Ee={class:"detail-item"},Be={class:"detail-item"},Ge={class:"detail-item"},He=["innerHTML"],Oe={class:"detail-item"},Re=["innerHTML"],Ke={key:0,class:"detail-item"},Je={class:"detail-item"},Qe={key:1,class:"detail-item"},We={class:"detail-item"},Xe={class:"modal-header"},Ye={class:"modal-body"},Ze={class:"adopt-form"},$e={class:"form-row"},et={class:"form-group"},tt={class:"form-row"},st={class:"form-group"},lt={class:"form-row"},it={class:"form-group"},ot=["value"],at={class:"form-group"},nt=["value"],rt={class:"form-hint"},dt={class:"form-row"},ct={class:"form-group"},pt={class:"form-group"},ut={class:"form-row"},gt={class:"form-group"},mt={class:"form-row"},ht={class:"form-group"},vt={class:"form-row"},ft={class:"form-group"},bt={class:"form-row"},_t={class:"form-group"},kt={class:"form-actions"},yt=["disabled"];function Tt(s,e,a,n,i,o){const T=A("router-link");return d(),c("div",M,[e[73]||(e[73]=t("div",{class:"page-header"},[t("h2",null,"AIç”Ÿæˆç”¨ä¾‹è®°å½•")],-1)),t("div",L,[t("div",z,[t("div",U,[e[32]||(e[32]=t("label",null,"çŠ¶æ€ç­›é€‰:",-1)),p(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>i.selectedStatus=l),onChange:e[1]||(e[1]=(...l)=>o.loadTasks&&o.loadTasks(...l)),class:"filter-select"},e[31]||(e[31]=[S('<option value="" data-v-c5e998c5>å…¨éƒ¨çŠ¶æ€</option><option value="pending" data-v-c5e998c5>éœ€æ±‚åˆ†æä¸­</option><option value="generating" data-v-c5e998c5>ç”¨ä¾‹ç¼–å†™ä¸­</option><option value="reviewing" data-v-c5e998c5>ç”¨ä¾‹è¯„å®¡ä¸­</option><option value="completed" data-v-c5e998c5>å·²å®Œæˆ</option><option value="failed" data-v-c5e998c5>å¤±è´¥</option>',6)]),544),[[v,i.selectedStatus]])]),t("div",q,[i.selectedTasks.length>0?(d(),c("button",{key:0,class:"batch-delete-btn",onClick:e[2]||(e[2]=(...l)=>o.batchDeleteTasks&&o.batchDeleteTasks(...l)),disabled:i.isDeleting},[i.isDeleting?(d(),c("span",x,"ğŸ—‘ï¸ åˆ é™¤ä¸­...")):(d(),c("span",N,"ğŸ—‘ï¸ æ‰¹é‡åˆ é™¤ ("+r(i.selectedTasks.length)+")",1))],8,I)):m("",!0),t("button",{class:"refresh-btn",onClick:e[3]||(e[3]=(...l)=>o.loadTasks&&o.loadTasks(...l)),disabled:i.isLoading},[i.isLoading?(d(),c("span",B,"ğŸ”„ åŠ è½½ä¸­...")):(d(),c("span",G,"ğŸ”„ åˆ·æ–°"))],8,E)])])]),i.allStats.total>0?(d(),c("div",H,[t("div",O,[t("div",R,[t("span",K,r(i.allStats.total),1),e[33]||(e[33]=t("span",{class:"stat-label"},"ä»»åŠ¡æ€»æ•°",-1))]),t("div",J,[t("span",Q,r(i.allStats.completed),1),e[34]||(e[34]=t("span",{class:"stat-label"},"å·²å®Œæˆ",-1))]),t("div",W,[t("span",X,r(i.allStats.running),1),e[35]||(e[35]=t("span",{class:"stat-label"},"è¿›è¡Œä¸­",-1))]),t("div",Y,[t("span",Z,r(i.allStats.failed),1),e[36]||(e[36]=t("span",{class:"stat-label"},"å¤±è´¥",-1))])])])):m("",!0),t("div",$,[i.isLoading?(d(),c("div",ee,e[37]||(e[37]=[t("p",null,"ğŸ”„ æ­£åœ¨åŠ è½½ä»»åŠ¡åˆ—è¡¨...",-1)]))):i.tasks.length===0?(d(),c("div",te,[e[41]||(e[41]=t("div",{class:"empty-icon"},"ğŸ“",-1)),e[42]||(e[42]=t("h3",null,"æš‚æ— ç”Ÿæˆä»»åŠ¡",-1)),t("p",null,[e[39]||(e[39]=b("è¿˜æ²¡æœ‰AIç”Ÿæˆç”¨ä¾‹ä»»åŠ¡ï¼Œå»",-1)),D(T,{to:"/requirement-analysis"},{default:j(()=>e[38]||(e[38]=[b("AIç”¨ä¾‹ç”Ÿæˆ",-1)])),_:1,__:[38]}),e[40]||(e[40]=b("é¡µé¢åˆ›å»ºä¸€ä¸ªä»»åŠ¡å§ï¼",-1))])])):(d(),c("div",se,[t("div",le,[t("div",ie,[t("input",{type:"checkbox",onChange:e[4]||(e[4]=(...l)=>o.toggleSelectAll&&o.toggleSelectAll(...l)),checked:o.isAllSelected,class:"task-checkbox"},null,40,oe)]),e[43]||(e[43]=S('<div class="header-cell serial-cell" data-v-c5e998c5>åºå·</div><div class="header-cell task-id-cell" data-v-c5e998c5>ä»»åŠ¡ID</div><div class="header-cell requirement-name-cell" data-v-c5e998c5>å…³è”éœ€æ±‚</div><div class="header-cell status-cell" data-v-c5e998c5>çŠ¶æ€</div><div class="header-cell count-cell" data-v-c5e998c5>ç”¨ä¾‹æ¡æ•°</div><div class="header-cell time-cell" data-v-c5e998c5>ç”Ÿæˆæ—¶é—´</div><div class="header-cell action-cell" data-v-c5e998c5>æ“ä½œ</div>',7))]),t("div",ae,[(d(!0),c(_,null,k(i.tasks,(l,C)=>(d(),c("div",{key:l.task_id,class:y(["table-row",{selected:o.isTaskSelected(l.task_id)}])},[t("div",ne,[t("input",{type:"checkbox",checked:o.isTaskSelected(l.task_id),onChange:h=>o.toggleTaskSelection(l.task_id),class:"task-checkbox"},null,40,re)]),t("div",de,r(o.getSerialNumber(C)),1),t("div",ce,r(l.task_id),1),t("div",pe,[t("span",ue,r(l.title),1)]),t("div",ge,[t("span",{class:y(["status-tag",l.status])},r(o.getStatusText(l.status)),3)]),t("div",me,[t("span",he,r(o.getTestCaseCount(l)),1)]),t("div",ve,r(o.formatDateTime(l.created_at)),1),t("div",fe,[t("div",be,[t("button",{class:"view-detail-btn",onClick:h=>o.viewTaskDetail(l)}," ğŸ“– æŸ¥çœ‹è¯¦æƒ… ",8,_e),l.status==="completed"?(d(),c("button",{key:0,class:"adopt-btn",onClick:h=>o.batchAdoptTask(l)}," âœ… ä¸€é”®é‡‡çº³ ",8,ke)):m("",!0),l.status==="completed"?(d(),c("button",{key:1,class:"discard-btn",onClick:h=>o.batchDiscardTask(l)}," âŒ ä¸€é”®å¼ƒç”¨ ",8,ye)):m("",!0)])])],2))),128))])]))]),i.tasks.length>0?(d(),c("div",Te,[t("div",Ce,r(o.paginationInfo),1),t("div",Se,[t("div",we,[e[44]||(e[44]=t("label",null,"æ¯é¡µæ˜¾ç¤ºï¼š",-1)),p(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>i.pagination.pageSize=l),onChange:e[6]||(e[6]=(...l)=>o.onPageSizeChange&&o.onPageSizeChange(...l))},[(d(!0),c(_,null,k(i.pagination.pageSizeOptions,l=>(d(),c("option",{key:l,value:l},r(l)+" æ¡ ",9,Pe))),128))],544),[[v,i.pagination.pageSize]])]),t("div",Ae,[t("button",{class:"page-btn",disabled:i.pagination.currentPage<=1,onClick:e[7]||(e[7]=l=>o.goToPage(i.pagination.currentPage-1))}," ä¸Šä¸€é¡µ ",8,De),t("div",je,[(d(!0),c(_,null,k(o.getVisiblePages(),l=>(d(),c("span",{key:l,class:"page-number"},[l!=="..."?(d(),c("button",{key:0,class:y(["page-btn",{active:l===i.pagination.currentPage}]),onClick:C=>o.goToPage(l)},r(l),11,Fe)):(d(),c("span",Ve,"..."))]))),128))]),t("button",{class:"page-btn",disabled:i.pagination.currentPage>=o.totalPages,onClick:e[8]||(e[8]=l=>o.goToPage(i.pagination.currentPage+1))}," ä¸‹ä¸€é¡µ ",8,Me)]),t("div",Le,[e[45]||(e[45]=t("label",null,"è·³è½¬åˆ°ï¼š",-1)),p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>i.jumpPage=l),type:"number",min:1,max:o.totalPages,onKeyup:e[10]||(e[10]=F((...l)=>o.jumpToPage&&o.jumpToPage(...l),["enter"])),placeholder:"é¡µç "},null,40,ze),[[f,i.jumpPage]]),t("button",{class:"jump-btn",onClick:e[11]||(e[11]=(...l)=>o.jumpToPage&&o.jumpToPage(...l))},"è·³è½¬")])])])):m("",!0),s.selectedTestCaseDetail?(d(),c("div",{key:2,class:"testcase-detail-modal",onClick:e[14]||(e[14]=(...l)=>s.closeTestCaseDetail&&s.closeTestCaseDetail(...l))},[t("div",{class:"modal-content",onClick:e[13]||(e[13]=w(()=>{},["stop"]))},[t("div",Ue,[t("h3",null,r(s.selectedTestCaseDetail.title),1),t("button",{class:"close-btn",onClick:e[12]||(e[12]=(...l)=>s.closeTestCaseDetail&&s.closeTestCaseDetail(...l))},"Ã—")]),t("div",qe,[t("div",Ie,[e[46]||(e[46]=t("label",null,"ç”¨ä¾‹ç¼–å·:",-1)),t("span",null,r(s.selectedTestCaseDetail.case_id),1)]),t("div",xe,[e[47]||(e[47]=t("label",null,"å…³è”éœ€æ±‚:",-1)),t("span",null,r(s.selectedTestCaseDetail.requirement_name)+" ("+r(s.selectedTestCaseDetail.requirement_id_display)+")",1)]),t("div",Ne,[e[48]||(e[48]=t("label",null,"ä¼˜å…ˆçº§:",-1)),t("span",{class:y(["priority-tag",s.selectedTestCaseDetail.priority.toLowerCase()])},r(s.selectedTestCaseDetail.priority_display),3)]),t("div",Ee,[e[49]||(e[49]=t("label",null,"çŠ¶æ€:",-1)),t("span",{class:y(["status-tag",s.selectedTestCaseDetail.status])},r(s.selectedTestCaseDetail.status_display),3)]),t("div",Be,[e[50]||(e[50]=t("label",null,"å‰ç½®æ¡ä»¶:",-1)),t("p",null,r(s.selectedTestCaseDetail.precondition),1)]),t("div",Ge,[e[51]||(e[51]=t("label",null,"æµ‹è¯•æ­¥éª¤:",-1)),t("p",{class:"test-steps",innerHTML:s.selectedTestCaseDetail.test_steps},null,8,He)]),t("div",Oe,[e[52]||(e[52]=t("label",null,"é¢„æœŸç»“æœ:",-1)),t("p",{innerHTML:s.selectedTestCaseDetail.expected_result},null,8,Re)]),s.selectedTestCaseDetail.review_comments?(d(),c("div",Ke,[e[53]||(e[53]=t("label",null,"è¯„å®¡æ„è§:",-1)),t("p",null,r(s.selectedTestCaseDetail.review_comments),1)])):m("",!0),t("div",Je,[e[54]||(e[54]=t("label",null,"ç”ŸæˆAI:",-1)),t("span",null,r(s.selectedTestCaseDetail.generated_by_ai),1)]),s.selectedTestCaseDetail.reviewed_by_ai?(d(),c("div",Qe,[e[55]||(e[55]=t("label",null,"è¯„å®¡AI:",-1)),t("span",null,r(s.selectedTestCaseDetail.reviewed_by_ai),1)])):m("",!0),t("div",We,[e[56]||(e[56]=t("label",null,"ç”Ÿæˆæ—¶é—´:",-1)),t("span",null,r(o.formatDateTime(s.selectedTestCaseDetail.created_at)),1)])])])])):m("",!0),i.showAdoptModal?(d(),c("div",{key:3,class:"testcase-detail-modal",onClick:e[30]||(e[30]=(...l)=>o.closeAdoptModal&&o.closeAdoptModal(...l))},[t("div",{class:"modal-content large-modal",onClick:e[29]||(e[29]=w(()=>{},["stop"]))},[t("div",Xe,[e[57]||(e[57]=t("h3",null,"é‡‡çº³æµ‹è¯•ç”¨ä¾‹",-1)),t("button",{class:"close-btn",onClick:e[15]||(e[15]=(...l)=>o.closeAdoptModal&&o.closeAdoptModal(...l))},"Ã—")]),t("div",Ye,[t("form",Ze,[t("div",$e,[t("div",et,[e[58]||(e[58]=t("label",null,"ç”¨ä¾‹æ ‡é¢˜:",-1)),p(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>i.adoptForm.title=l),type:"text",placeholder:"è¯·è¾“å…¥ç”¨ä¾‹æ ‡é¢˜"},null,512),[[f,i.adoptForm.title]])])]),t("div",tt,[t("div",st,[e[59]||(e[59]=t("label",null,"ç”¨ä¾‹æè¿°:",-1)),p(t("textarea",{"onUpdate:modelValue":e[17]||(e[17]=l=>i.adoptForm.description=l),rows:"3",placeholder:"è¯·è¾“å…¥ç”¨ä¾‹æè¿°"},null,512),[[f,i.adoptForm.description]])])]),t("div",lt,[t("div",it,[e[61]||(e[61]=t("label",null,[b("å½’å±é¡¹ç›®: "),t("span",{class:"required"},"*")],-1)),p(t("select",{"onUpdate:modelValue":e[18]||(e[18]=l=>i.adoptForm.project_id=l),onChange:e[19]||(e[19]=(...l)=>o.onAdoptProjectChange&&o.onAdoptProjectChange(...l))},[e[60]||(e[60]=t("option",{value:""},"è¯·é€‰æ‹©é¡¹ç›®",-1)),(d(!0),c(_,null,k(i.projects,l=>(d(),c("option",{key:l.id,value:l.id},r(l.name),9,ot))),128))],544),[[v,i.adoptForm.project_id]])]),t("div",at,[e[63]||(e[63]=t("label",null,[b("å…³è”ç‰ˆæœ¬: "),t("span",{class:"required"},"*")],-1)),p(t("select",{"onUpdate:modelValue":e[20]||(e[20]=l=>i.adoptForm.version_id=l)},[e[62]||(e[62]=t("option",{value:""},"è¯·é€‰æ‹©ç‰ˆæœ¬",-1)),(d(!0),c(_,null,k(o.availableVersions,l=>(d(),c("option",{key:l.id,value:l.id},r(l.name)+r(l.is_baseline?" (åŸºçº¿)":""),9,nt))),128))],512),[[v,i.adoptForm.version_id]]),t("small",rt,r(i.adoptForm.project_id?`æ˜¾ç¤ºé¡¹ç›®"${o.getProjectName(i.adoptForm.project_id)}"çš„ç‰ˆæœ¬`:"æ˜¾ç¤ºæ‰€æœ‰ç‰ˆæœ¬ï¼Œé€‰æ‹©é¡¹ç›®åå°†è¿‡æ»¤ä¸ºé¡¹ç›®ç‰ˆæœ¬"),1)])]),t("div",dt,[t("div",ct,[e[65]||(e[65]=t("label",null,"ä¼˜å…ˆçº§:",-1)),p(t("select",{"onUpdate:modelValue":e[21]||(e[21]=l=>i.adoptForm.priority=l)},e[64]||(e[64]=[t("option",{value:"low"},"ä½",-1),t("option",{value:"medium"},"ä¸­",-1),t("option",{value:"high"},"é«˜",-1),t("option",{value:"critical"},"ç´§æ€¥",-1)]),512),[[v,i.adoptForm.priority]])]),t("div",pt,[e[67]||(e[67]=t("label",null,"æµ‹è¯•ç±»å‹:",-1)),p(t("select",{"onUpdate:modelValue":e[22]||(e[22]=l=>i.adoptForm.test_type=l)},e[66]||(e[66]=[S('<option value="functional" data-v-c5e998c5>åŠŸèƒ½æµ‹è¯•</option><option value="integration" data-v-c5e998c5>é›†æˆæµ‹è¯•</option><option value="api" data-v-c5e998c5>APIæµ‹è¯•</option><option value="ui" data-v-c5e998c5>UIæµ‹è¯•</option><option value="performance" data-v-c5e998c5>æ€§èƒ½æµ‹è¯•</option><option value="security" data-v-c5e998c5>å®‰å…¨æµ‹è¯•</option>',6)]),512),[[v,i.adoptForm.test_type]])])]),t("div",ut,[t("div",gt,[e[69]||(e[69]=t("label",null,"çŠ¶æ€:",-1)),p(t("select",{"onUpdate:modelValue":e[23]||(e[23]=l=>i.adoptForm.status=l)},e[68]||(e[68]=[t("option",{value:"draft"},"è‰ç¨¿",-1),t("option",{value:"active"},"æ¿€æ´»",-1)]),512),[[v,i.adoptForm.status]])])]),t("div",mt,[t("div",ht,[e[70]||(e[70]=t("label",null,"å‰ç½®æ¡ä»¶:",-1)),p(t("textarea",{"onUpdate:modelValue":e[24]||(e[24]=l=>i.adoptForm.preconditions=l),rows:"3",placeholder:"è¯·è¾“å…¥å‰ç½®æ¡ä»¶"},null,512),[[f,i.adoptForm.preconditions]])])]),t("div",vt,[t("div",ft,[e[71]||(e[71]=t("label",null,"æ“ä½œæ­¥éª¤:",-1)),p(t("textarea",{"onUpdate:modelValue":e[25]||(e[25]=l=>i.adoptForm.steps=l),rows:"6",placeholder:"è¯·è¾“å…¥è¯¦ç»†çš„æ“ä½œæ­¥éª¤"},null,512),[[f,i.adoptForm.steps]])])]),t("div",bt,[t("div",_t,[e[72]||(e[72]=t("label",null,"é¢„æœŸç»“æœ:",-1)),p(t("textarea",{"onUpdate:modelValue":e[26]||(e[26]=l=>i.adoptForm.expected_result=l),rows:"3",placeholder:"è¯·è¾“å…¥é¢„æœŸç»“æœ"},null,512),[[f,i.adoptForm.expected_result]])])]),t("div",kt,[t("button",{type:"button",class:"confirm-btn",onClick:e[27]||(e[27]=(...l)=>o.confirmAdopt&&o.confirmAdopt(...l)),disabled:i.isAdopting},r(i.isAdopting?"æ­£åœ¨é‡‡çº³...":"ç¡®è®¤é‡‡çº³"),9,yt),t("button",{type:"button",class:"cancel-btn",onClick:e[28]||(e[28]=(...l)=>o.closeAdoptModal&&o.closeAdoptModal(...l))},"å–æ¶ˆ")])])])])])):m("",!0)])}const St=P(V,[["render",Tt],["__scopeId","data-v-c5e998c5"]]);export{St as default};
