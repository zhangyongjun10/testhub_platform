import{_ as E,Q as L,q as m,x as R,r,o as f,c as v,b as u,d as e,w as a,C,e as y,f as s,t as i,B as S,J as H,R as U}from"./index-054e2682.js";const h={class:"page-container"},q={class:"page-header"},z={class:"card-container"},I={key:0},J={class:"members-section"},Q={class:"environments-section"},F={key:1},G={__name:"ProjectDetail",setup(K){const g=L(),n=m(null),w=m("info"),D=m(!1),$=m(!1),k=async()=>{try{const o=await C.get(`/projects/${g.params.id}/`);n.value=o.data}catch{y.error("获取项目详情失败")}},V=o=>({active:"success",paused:"warning",completed:"info",archived:"info"})[o]||"info",B=o=>({active:"进行中",paused:"已暂停",completed:"已完成",archived:"已归档"})[o]||o,x=o=>U(o).format("YYYY-MM-DD HH:mm"),A=async o=>{try{await C.delete(`/projects/${g.params.id}/members/${o.id}/`),y.success("成员删除成功"),k()}catch{y.error("删除成员失败")}};return R(()=>{k()}),(o,t)=>{const N=r("ArrowLeft"),P=r("el-icon"),c=r("el-button"),p=r("el-descriptions-item"),j=r("el-tag"),T=r("el-descriptions"),b=r("el-tab-pane"),d=r("el-table-column"),M=r("el-table"),Y=r("el-tabs");return f(),v("div",h,[u("div",q,[t[5]||(t[5]=u("h1",{class:"page-title"},"项目详情",-1)),e(c,{type:"primary",onClick:t[0]||(t[0]=l=>o.$router.back())},{default:a(()=>[e(P,null,{default:a(()=>[e(N)]),_:1}),t[4]||(t[4]=s(" 返回 ",-1))]),_:1,__:[4]})]),u("div",z,[e(Y,{modelValue:w.value,"onUpdate:modelValue":t[3]||(t[3]=l=>w.value=l)},{default:a(()=>[e(b,{label:"项目信息",name:"info"},{default:a(()=>[n.value?(f(),v("div",I,[e(T,{column:2,border:""},{default:a(()=>[e(p,{label:"项目名称"},{default:a(()=>[s(i(n.value.name),1)]),_:1}),e(p,{label:"项目状态"},{default:a(()=>[e(j,{type:V(n.value.status)},{default:a(()=>[s(i(B(n.value.status)),1)]),_:1},8,["type"])]),_:1}),e(p,{label:"负责人"},{default:a(()=>{var l;return[s(i((l=n.value.owner)==null?void 0:l.username),1)]}),_:1}),e(p,{label:"创建时间"},{default:a(()=>[s(i(x(n.value.created_at)),1)]),_:1}),e(p,{label:"项目描述",span:2},{default:a(()=>[s(i(n.value.description||"暂无描述"),1)]),_:1})]),_:1})])):S("",!0)]),_:1}),e(b,{label:"项目成员",name:"members"},{default:a(()=>{var l;return[u("div",J,[e(c,{type:"primary",onClick:t[1]||(t[1]=_=>D.value=!0)},{default:a(()=>t[6]||(t[6]=[s("添加成员",-1)])),_:1,__:[6]}),e(M,{data:((l=n.value)==null?void 0:l.members)||[],style:{width:"100%","margin-top":"20px"}},{default:a(()=>[e(d,{prop:"user.username",label:"用户名"}),e(d,{prop:"user.email",label:"邮箱"}),e(d,{prop:"role",label:"角色"}),e(d,{prop:"joined_at",label:"加入时间"},{default:a(({row:_})=>[s(i(x(_.joined_at)),1)]),_:1}),e(d,{label:"操作",width:"100"},{default:a(({row:_})=>[e(c,{size:"small",type:"danger",onClick:O=>A(_)},{default:a(()=>t[7]||(t[7]=[s("删除",-1)])),_:2,__:[7]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]}),_:1}),e(b,{label:"环境配置",name:"environments"},{default:a(()=>{var l;return[u("div",Q,[e(c,{type:"primary",onClick:t[2]||(t[2]=_=>$.value=!0)},{default:a(()=>t[8]||(t[8]=[s("添加环境",-1)])),_:1,__:[8]}),e(M,{data:((l=n.value)==null?void 0:l.environments)||[],style:{width:"100%","margin-top":"20px"}},{default:a(()=>[e(d,{prop:"name",label:"环境名称"}),e(d,{prop:"base_url",label:"基础URL"}),e(d,{prop:"description",label:"描述"}),e(d,{prop:"is_default",label:"默认环境"},{default:a(({row:_})=>[_.is_default?(f(),H(j,{key:0,type:"success"},{default:a(()=>t[9]||(t[9]=[s("是",-1)])),_:1,__:[9]})):(f(),v("span",F,"否"))]),_:1})]),_:1},8,["data"])])]}),_:1})]),_:1},8,["modelValue"])])])}}},X=E(G,[["__scopeId","data-v-58cf7791"]]);export{X as default};
