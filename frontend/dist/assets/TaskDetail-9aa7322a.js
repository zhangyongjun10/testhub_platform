import{_ as q,e as c,C,r as v,o as u,c as h,b as s,t as p,G as I,B as k,d as g,w as b,f as E,ab as N,F as D,y as A,N as L,P as z,A as B,aa as U}from"./index-054e2682.js";import{u as w,w as H}from"./xlsx-f5126985.js";const j={name:"TaskDetail",data(){return{taskId:"",task:{},testCases:[],selectedCases:[],isLoading:!0,showCaseDetail:!1,selectedCase:{},selectedCaseIndex:0,currentPage:1,pageSize:10,isExporting:!1,isEditing:!1,isSaving:!1,editForm:{caseId:"",scenario:"",precondition:"",steps:"",expected:"",priority:"P2"}}},computed:{isAllSelected(){return this.testCases.length>0&&this.selectedCases.length===this.testCases.length},totalPages(){return Math.ceil(this.testCases.length/this.pageSize)},paginatedTestCases(){const l=(this.currentPage-1)*this.pageSize,e=l+this.pageSize;return this.testCases.slice(l,e)},paginationStart(){return(this.currentPage-1)*this.pageSize+1},paginationEnd(){return Math.min(this.currentPage*this.pageSize,this.testCases.length)}},mounted(){this.taskId=this.$route.params.taskId,this.loadTaskDetail()},methods:{async copyRequirementText(){try{await navigator.clipboard.writeText(this.task.requirement_text),c.success("éœ€æ±‚æè¿°å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{const e=document.createElement("textarea");e.value=this.task.requirement_text,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),c.success("éœ€æ±‚æè¿°å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{c.error("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")}document.body.removeChild(e)}},async loadTaskDetail(){try{const l=await C.get(`/requirement-analysis/api/testcase-generation/${this.taskId}/`);this.task=l.data,this.task.final_test_cases&&(this.testCases=this.parseTestCases(this.task.final_test_cases))}catch(l){console.error("åŠ è½½ä»»åŠ¡è¯¦æƒ…å¤±è´¥:",l),c.error("åŠ è½½ä»»åŠ¡è¯¦æƒ…å¤±è´¥")}finally{this.isLoading=!1}},parseTestCases(l){if(!l)return[];const e=l.split(`
`).filter(i=>i.trim()),o=[];let a=!1;const t=[];for(let i of e){const r=i.trim();if(r.includes("|")&&!r.includes("--------")){const d=r.split("|").map(m=>m.trim()).filter(m=>m);d.length>1&&(t.push(d),a=!0)}}if(a&&t.length>1){const i=t[0];for(let r=1;r<t.length;r++){const d=t[r],m={};i.forEach((_,P)=>{const f=d[P]||"";_.includes("ç¼–å·")||_.includes("ID")||_.includes("ç”¨ä¾‹ID")?m.caseId=f:_.includes("åœºæ™¯")||_.includes("æ ‡é¢˜")||_.includes("æµ‹è¯•ç›®æ ‡")?m.scenario=f:_.includes("å‰ç½®")?m.precondition=f:_.includes("æ­¥éª¤")||_.includes("æ“ä½œæ­¥éª¤")?m.steps=f:_.includes("é¢„æœŸ")||_.includes("ç»“æœ")?m.expected=f:_.includes("ä¼˜å…ˆçº§")&&(m.priority=f)}),(m.scenario||m.caseId)&&(!m.steps&&m.scenario&&(m.steps="å‚è€ƒæµ‹è¯•ç›®æ ‡æ‰§è¡Œç›¸åº”æ“ä½œ"),o.push(m))}}else{let i={},r=1;for(const d of e)d.includes("æµ‹è¯•ç”¨ä¾‹")||d.includes("Test Case")||d.match(/^(\d+\.|\*|\-|\d+ã€)/)?(Object.keys(i).length>0&&(o.push(i),r++),i={caseId:`TC${String(r).padStart(3,"0")}`,scenario:d.replace(/^(\d+\.|\*|\-|\d+ã€)\s*/,"").replace(/æµ‹è¯•ç”¨ä¾‹\d*[:ï¼š]?\s*/,""),precondition:"",steps:"",expected:"",priority:"ä¸­"}):d.includes("å‰ç½®æ¡ä»¶")||d.includes("å‰æ")?i.precondition=d.replace(/.*?[:ï¼š]\s*/,""):d.includes("æµ‹è¯•æ­¥éª¤")||d.includes("æ“ä½œæ­¥éª¤")||d.includes("æ­¥éª¤")?i.steps=d.replace(/.*?[:ï¼š]\s*/,""):d.includes("é¢„æœŸç»“æœ")||d.includes("Expected")?i.expected=d.replace(/.*?[:ï¼š]\s*/,""):d.includes("ä¼˜å…ˆçº§")&&(i.priority=d.replace(/.*?[:ï¼š]\s*/,""));Object.keys(i).length>0&&o.push(i)}return o},getStatusText(l){return{pending:"éœ€æ±‚åˆ†æä¸­",generating:"ç”¨ä¾‹ç¼–å†™ä¸­",reviewing:"ç”¨ä¾‹è¯„å®¡ä¸­",completed:"å·²å®Œæˆ",failed:"å¤±è´¥"}[l]||l},formatTextForList(l){return l?l.replace(/<br\s*\/?>/gi,`
`):""},toggleSelectAll(){this.isAllSelected?this.selectedCases=[]:this.selectedCases=[...this.testCases]},updateSelectAll(){},async batchAdopt(){var l,e;if(this.selectedCases.length===0){c.warning("è¯·å…ˆé€‰æ‹©è¦é‡‡çº³çš„æµ‹è¯•ç”¨ä¾‹");return}if(confirm(`ç¡®å®šè¦é‡‡çº³é€‰ä¸­çš„ ${this.selectedCases.length} æ¡æµ‹è¯•ç”¨ä¾‹å—ï¼Ÿ`))try{const o=this.selectedCases.map((a,t)=>({title:a.scenario||`æµ‹è¯•ç”¨ä¾‹${t+1}`,description:a.scenario||"",preconditions:a.precondition||"",steps:a.steps||"",expected_result:a.expected||"",priority:this.mapPriority(a.priority),test_type:"functional",status:"draft"}));await C.post(`/requirement-analysis/api/testcase-generation/${this.taskId}/batch_adopt_selected/`,{test_cases:o}),c.success(`æˆåŠŸé‡‡çº³ ${this.selectedCases.length} æ¡æµ‹è¯•ç”¨ä¾‹ï¼`),this.selectedCases=[]}catch(o){console.error("æ‰¹é‡é‡‡çº³å¤±è´¥:",o),c.error("æ‰¹é‡é‡‡çº³å¤±è´¥: "+(((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.message)||o.message))}},async batchDiscard(){var l,e;if(this.selectedCases.length===0){c.warning("è¯·å…ˆé€‰æ‹©è¦å¼ƒç”¨çš„æµ‹è¯•ç”¨ä¾‹");return}if(confirm(`ç¡®å®šè¦å¼ƒç”¨é€‰ä¸­çš„ ${this.selectedCases.length} æ¡æµ‹è¯•ç”¨ä¾‹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))try{const o=this.selectedCases.map(t=>this.testCases.findIndex(r=>r.scenario===t.scenario&&r.steps===t.steps&&r.expected===t.expected)).filter(t=>t!==-1),a=await C.post(`/requirement-analysis/api/testcase-generation/${this.taskId}/discard_selected_cases/`,{case_indices:o});a.data.task_deleted?(c.success("æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å·²å¼ƒç”¨ï¼Œä»»åŠ¡å·²åˆ é™¤"),this.$router.push("/generated-testcases")):(c.success(`æˆåŠŸå¼ƒç”¨ ${a.data.discarded_count} æ¡æµ‹è¯•ç”¨ä¾‹`),a.data.updated_test_cases&&(this.testCases=this.parseTestCases(a.data.updated_test_cases),this.selectedCases=[],this.currentPage=1))}catch(o){console.error("æ‰¹é‡å¼ƒç”¨å¤±è´¥:",o),c.error("æ‰¹é‡å¼ƒç”¨å¤±è´¥: "+(((e=(l=o.response)==null?void 0:l.data)==null?void 0:e.error)||o.message))}},viewCaseDetail(l,e){this.selectedCase=l,this.selectedCaseIndex=e,this.showCaseDetail=!0},closeCaseDetail(){this.showCaseDetail=!1,this.selectedCase={},this.isEditing=!1,this.editForm={caseId:"",scenario:"",precondition:"",steps:"",expected:"",priority:"P2"}},startEdit(){this.isEditing=!0,this.editForm={caseId:this.selectedCase.caseId||"",scenario:this.selectedCase.scenario||"",precondition:this.convertBrToNewline(this.selectedCase.precondition||""),steps:this.convertBrToNewline(this.selectedCase.steps||""),expected:this.convertBrToNewline(this.selectedCase.expected||""),priority:this.selectedCase.priority||"P2"}},cancelEdit(){this.isEditing=!1,this.editForm={caseId:"",scenario:"",precondition:"",steps:"",expected:"",priority:"P2"}},async saveEdit(){var l,e,o;if(!((l=this.editForm.scenario)!=null&&l.trim())){c.warning("è¯·è¾“å…¥æµ‹è¯•åœºæ™¯");return}this.isSaving=!0;try{const a={...this.selectedCase,scenario:this.editForm.scenario,precondition:this.convertNewlineToBr(this.editForm.precondition),steps:this.convertNewlineToBr(this.editForm.steps),expected:this.convertNewlineToBr(this.editForm.expected),priority:this.editForm.priority},t=this.testCases.findIndex(r=>r===this.selectedCase);t!==-1&&(this.testCases[t]=a,this.selectedCase=a);const i=this.generateTestCasesString();await C.post(`/requirement-analysis/api/testcase-generation/${this.taskId}/update_test_cases/`,{final_test_cases:i}),this.task.final_test_cases=i,c.success("æµ‹è¯•ç”¨ä¾‹æ›´æ–°æˆåŠŸ"),this.isEditing=!1}catch(a){console.error("æ›´æ–°å¤±è´¥:",a),c.error("æ›´æ–°å¤±è´¥: "+(((o=(e=a.response)==null?void 0:e.data)==null?void 0:o.error)||a.message))}finally{this.isSaving=!1}},generateTestCasesString(){if(this.testCases.length===0)return"";const l=["æµ‹è¯•ç”¨ä¾‹ç¼–å·","æµ‹è¯•åœºæ™¯","å‰ç½®æ¡ä»¶","æ“ä½œæ­¥éª¤","é¢„æœŸç»“æœ","ä¼˜å…ˆçº§"];let e=l.join(" | ")+`
`;return e+="|".repeat(l.length)+`
`,this.testCases.forEach((o,a)=>{const t=[o.caseId||`TC${String(a+1).padStart(3,"0")}`,o.scenario||"",o.precondition||"",o.steps||"",o.expected||"",o.priority||"P2"];e+=t.join(" | ")+`
`}),e},convertBrToNewline(l){return l?l.replace(/<br\s*\/?>/gi,`
`):""},convertNewlineToBr(l){return l?l.replace(/\n/g,"<br>"):""},async adoptSingleCase(l,e){var o,a;if(confirm(`ç¡®å®šè¦é‡‡çº³æµ‹è¯•ç”¨ä¾‹"${l.scenario}"å—ï¼Ÿ`))try{const t={title:l.scenario||`æµ‹è¯•ç”¨ä¾‹${e+1}`,description:l.scenario||"",preconditions:l.precondition||"",steps:l.steps||"",expected_result:l.expected||"",priority:this.mapPriority(l.priority),test_type:"functional",status:"draft"};await C.post("/testcases/",t),c.success("æµ‹è¯•ç”¨ä¾‹é‡‡çº³æˆåŠŸï¼")}catch(t){console.error("é‡‡çº³ç”¨ä¾‹å¤±è´¥:",t),c.error("é‡‡çº³ç”¨ä¾‹å¤±è´¥: "+(((a=(o=t.response)==null?void 0:o.data)==null?void 0:a.message)||t.message))}},discardSingleCase(l,e){if(confirm(`ç¡®å®šè¦å¼ƒç”¨æµ‹è¯•ç”¨ä¾‹"${l.scenario}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`))try{const o=(this.currentPage-1)*this.pageSize+e;C.post(`/requirement-analysis/api/testcase-generation/${this.taskId}/discard_single_case/`,{case_index:o}).then(a=>{a.data.task_deleted?(c.success("æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å·²å¼ƒç”¨ï¼Œä»»åŠ¡å·²åˆ é™¤"),this.$router.push("/generated-testcases")):(c.success("æµ‹è¯•ç”¨ä¾‹å·²å¼ƒç”¨"),a.data.updated_test_cases&&(this.testCases=this.parseTestCases(a.data.updated_test_cases),this.currentPage>1&&this.paginatedTestCases.length===0&&this.currentPage--))}).catch(a=>{var t,i;console.error("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥:",a),c.error("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥: "+(((i=(t=a.response)==null?void 0:t.data)==null?void 0:i.error)||a.message))})}catch(o){console.error("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥:",o),c.error("å¼ƒç”¨ç”¨ä¾‹å¤±è´¥")}},mapPriority(l){return{æœ€é«˜:"critical",é«˜:"high",ä¸­:"medium",ä½:"low",P0:"critical",P1:"high",P2:"medium",P3:"low"}[l]||"medium"},priorityToChinese(l){return{critical:"ç´§æ€¥",high:"é«˜",medium:"ä¸­",low:"ä½"}[l]||"ä¸­"},exportToExcel(){if(this.testCases.length===0){c.warning("æ²¡æœ‰æµ‹è¯•ç”¨ä¾‹å¯ä»¥å¯¼å‡º");return}this.isExporting=!0;try{const l=w.book_new(),e=[];e.push(["æµ‹è¯•ç”¨ä¾‹ç¼–å·","æµ‹è¯•åœºæ™¯","å‰ç½®æ¡ä»¶","æ“ä½œæ­¥éª¤","é¢„æœŸç»“æœ","ä¼˜å…ˆçº§"]),this.testCases.forEach((r,d)=>{e.push([r.caseId||`TC${String(d+1).padStart(3,"0")}`,r.scenario||"",this.formatTextForList(r.precondition||""),this.formatTextForList(r.steps||""),this.formatTextForList(r.expected||""),r.priority||"ä¸­"])});const o=w.aoa_to_sheet(e),a=[{wch:15},{wch:30},{wch:25},{wch:50},{wch:40},{wch:10}];o["!cols"]=a;const t=w.decode_range(o["!ref"]);for(let r=t.s.r;r<=t.e.r;r++)for(let d=t.s.c;d<=t.e.c;d++){const m=w.encode_cell({r,c:d});o[m]&&(o[m].s={alignment:{wrapText:!0,vertical:"top"}})}w.book_append_sheet(l,o,"æµ‹è¯•ç”¨ä¾‹");const i=`æµ‹è¯•ç”¨ä¾‹_${this.taskId}_${new Date().toISOString().slice(0,10)}.xlsx`;H(l,i),c.success("æµ‹è¯•ç”¨ä¾‹å¯¼å‡ºæˆåŠŸ")}catch(l){console.error("å¯¼å‡ºExcelå¤±è´¥:",l),c.error("å¯¼å‡ºExcelå¤±è´¥: "+(l.message||"æœªçŸ¥é”™è¯¯"))}finally{this.isExporting=!1}}}},O={class:"task-detail"},R={class:"page-header"},G={class:"header-left"},W={class:"task-info"},J={class:"task-id"},K={class:"header-actions"},Q=["disabled"],X={key:0},Y={key:1},Z={key:0,class:"requirement-description-card"},$={class:"requirement-content"},ee={class:"requirement-text"},se={class:"requirement-actions"},te={key:1,class:"loading-state"},ie={key:2,class:"error-state"},le={key:3,class:"task-content"},ne={key:0,class:"batch-actions"},oe={class:"selection-info"},ae={class:"select-all"},re=["checked"],de={key:0,class:"selected-count"},ce={class:"batch-buttons"},pe=["disabled"],ue=["disabled"],he={key:1,class:"testcases-table"},me={class:"table-body"},ge={class:"body-cell checkbox-cell"},_e=["value"],ve={class:"body-cell"},fe={class:"body-cell"},be={class:"body-cell text-limit-2"},ye={class:"body-cell text-limit-2"},Ce={class:"body-cell text-limit-2"},ke={class:"body-cell"},xe={class:"body-cell"},we={class:"action-buttons"},Te=["onClick"],Se=["onClick"],Pe=["onClick"],Ie={key:2,class:"empty-state"},Ee={key:3,class:"pagination-section"},De={class:"pagination-info"},Fe={class:"pagination-controls"},Ve={class:"page-size-selector"},Le={class:"pagination-buttons"},Me=["disabled"],qe={class:"current-page"},Ne=["disabled"],Ae={class:"modal-header"},ze={key:0,class:"modal-body"},Be={class:"detail-item"},Ue={class:"detail-item"},He={class:"detail-item"},je=["innerHTML"],Oe={class:"detail-item"},Re=["innerHTML"],Ge={class:"detail-item"},We=["innerHTML"],Je={class:"detail-item"},Ke={key:1,class:"modal-body edit-mode"},Qe={class:"form-item"},Xe={class:"readonly-field"},Ye={class:"form-item"},Ze={class:"form-item"},$e={class:"form-item"},es={class:"form-item"},ss={class:"form-item"},ts={class:"modal-footer"},is=["disabled"],ls={key:0},ns={key:1},os=["disabled"];function as(l,e,o,a,t,i){var F;const r=v("DocumentCopy"),d=v("el-icon"),m=v("el-button"),_=v("el-collapse-item"),P=v("el-collapse"),f=v("router-link"),T=v("el-input"),S=v("el-option"),M=v("el-select");return u(),h("div",O,[s("div",R,[s("div",G,[s("h2",null,"ä»»åŠ¡è¯¦æƒ… - "+p(t.task.title),1),s("div",W,[s("span",J,"ä»»åŠ¡ID: "+p(t.taskId),1),s("span",{class:I(["task-status",t.task.status])},p(i.getStatusText(t.task.status)),3)])]),s("div",K,[t.testCases.length>0?(u(),h("button",{key:0,class:"export-btn",onClick:e[0]||(e[0]=(...n)=>i.exportToExcel&&i.exportToExcel(...n)),disabled:t.isExporting},[t.isExporting?(u(),h("span",X,"ğŸ’¾ å¯¼å‡ºä¸­...")):(u(),h("span",Y,"ğŸ’¾ å¯¼å‡ºExcel"))],8,Q)):k("",!0)])]),t.task.requirement_text?(u(),h("div",Z,[g(P,null,{default:b(()=>[g(_,{name:"requirement"},{title:b(()=>e[22]||(e[22]=[s("div",{class:"collapse-title"},[s("span",{class:"title-icon"},"ğŸ“‹"),s("span",{class:"title-text"},"éœ€æ±‚æè¿°"),s("span",{class:"title-hint"},"ï¼ˆç‚¹å‡»å±•å¼€æŸ¥çœ‹å®Œæ•´å†…å®¹ï¼‰")],-1)])),default:b(()=>[s("div",$,[s("div",ee,p(t.task.requirement_text),1),s("div",se,[g(m,{size:"small",onClick:i.copyRequirementText},{default:b(()=>[g(d,null,{default:b(()=>[g(r)]),_:1}),e[23]||(e[23]=E(" å¤åˆ¶éœ€æ±‚æè¿° ",-1))]),_:1,__:[23]},8,["onClick"])])])]),_:1})]),_:1})])):k("",!0),t.isLoading?(u(),h("div",te,e[24]||(e[24]=[s("p",null,"ğŸ”„ æ­£åœ¨åŠ è½½ä»»åŠ¡è¯¦æƒ…...",-1)]))):t.task.task_id?(u(),h("div",le,[t.testCases.length>0?(u(),h("div",ne,[s("div",oe,[s("label",ae,[s("input",{type:"checkbox",checked:i.isAllSelected,onChange:e[1]||(e[1]=(...n)=>i.toggleSelectAll&&i.toggleSelectAll(...n))},null,40,re),e[27]||(e[27]=E(" å…¨é€‰ ",-1))]),t.selectedCases.length>0?(u(),h("span",de," å·²é€‰æ‹© "+p(t.selectedCases.length)+" æ¡ç”¨ä¾‹ ",1)):k("",!0)]),s("div",ce,[s("button",{class:"batch-adopt-btn",disabled:t.selectedCases.length===0,onClick:e[2]||(e[2]=(...n)=>i.batchAdopt&&i.batchAdopt(...n))}," âœ… ä¸€é”®é‡‡çº³ ("+p(t.selectedCases.length)+") ",9,pe),s("button",{class:"batch-discard-btn",disabled:t.selectedCases.length===0,onClick:e[3]||(e[3]=(...n)=>i.batchDiscard&&i.batchDiscard(...n))}," âŒ ä¸€é”®å¼ƒç”¨ ("+p(t.selectedCases.length)+") ",9,ue)])])):k("",!0),t.testCases.length>0?(u(),h("div",he,[e[28]||(e[28]=N('<div class="table-header" data-v-931d1da0><div class="header-cell checkbox-cell" data-v-931d1da0>é€‰æ‹©</div><div class="header-cell" data-v-931d1da0>æµ‹è¯•ç”¨ä¾‹ç¼–å·</div><div class="header-cell" data-v-931d1da0>æµ‹è¯•åœºæ™¯</div><div class="header-cell" data-v-931d1da0>å‰ç½®æ¡ä»¶</div><div class="header-cell" data-v-931d1da0>æ“ä½œæ­¥éª¤</div><div class="header-cell" data-v-931d1da0>é¢„æœŸç»“æœ</div><div class="header-cell" data-v-931d1da0>ä¼˜å…ˆçº§</div><div class="header-cell" data-v-931d1da0>æ“ä½œ</div></div>',1)),s("div",me,[(u(!0),h(D,null,A(i.paginatedTestCases,(n,x)=>{var V;return u(),h("div",{key:n.id||x,class:"table-row"},[s("div",ge,[L(s("input",{type:"checkbox",value:n,"onUpdate:modelValue":e[4]||(e[4]=y=>t.selectedCases=y),onChange:e[5]||(e[5]=(...y)=>i.updateSelectAll&&i.updateSelectAll(...y))},null,40,_e),[[U,t.selectedCases]])]),s("div",ve,p(n.caseId||`TC${String(x+1).padStart(3,"0")}`),1),s("div",fe,p(n.scenario),1),s("div",be,p(i.formatTextForList(n.precondition)),1),s("div",ye,p(i.formatTextForList(n.steps)),1),s("div",Ce,p(i.formatTextForList(n.expected)),1),s("div",ke,[s("span",{class:I(["priority-tag",(V=n.priority)==null?void 0:V.toLowerCase()])},p(n.priority||"P2"),3)]),s("div",xe,[s("div",we,[s("button",{class:"view-btn",onClick:y=>i.viewCaseDetail(n,x)},"ğŸ“– æŸ¥çœ‹è¯¦æƒ…",8,Te),s("button",{class:"adopt-btn",onClick:y=>i.adoptSingleCase(n,x)},"âœ… é‡‡çº³",8,Se),s("button",{class:"discard-btn",onClick:y=>i.discardSingleCase(n,x)},"âŒ å¼ƒç”¨",8,Pe)])])])}),128))])])):(u(),h("div",Ie,e[29]||(e[29]=[s("h3",null,"æš‚æ— æµ‹è¯•ç”¨ä¾‹æ•°æ®",-1),s("p",null,"è¯¥ä»»åŠ¡è¿˜æ²¡æœ‰ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹æˆ–ç”¨ä¾‹å·²è¢«æ¸…ç©º",-1)]))),t.testCases.length>0?(u(),h("div",Ee,[s("div",De," æ˜¾ç¤º "+p(i.paginationStart)+"-"+p(i.paginationEnd)+" æ¡ï¼Œå…± "+p(t.testCases.length)+" æ¡ ",1),s("div",Fe,[s("div",Ve,[e[31]||(e[31]=s("label",null,"æ¯é¡µæ˜¾ç¤ºï¼š",-1)),L(s("select",{"onUpdate:modelValue":e[6]||(e[6]=n=>t.pageSize=n),onChange:e[7]||(e[7]=n=>t.currentPage=1)},e[30]||(e[30]=[s("option",{value:"10"},"10 æ¡",-1),s("option",{value:"20"},"20 æ¡",-1),s("option",{value:"50"},"50 æ¡",-1)]),544),[[z,t.pageSize]])]),s("div",Le,[s("button",{disabled:t.currentPage<=1,onClick:e[8]||(e[8]=n=>t.currentPage--)},"ä¸Šä¸€é¡µ",8,Me),s("span",qe,"ç¬¬ "+p(t.currentPage)+" é¡µï¼Œå…± "+p(i.totalPages)+" é¡µ",1),s("button",{disabled:t.currentPage>=i.totalPages,onClick:e[9]||(e[9]=n=>t.currentPage++)},"ä¸‹ä¸€é¡µ",8,Ne)])])])):k("",!0)])):(u(),h("div",ie,[e[26]||(e[26]=s("h3",null,"ä»»åŠ¡ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤",-1)),g(f,{to:"/generated-testcases"},{default:b(()=>e[25]||(e[25]=[E("è¿”å›ä»»åŠ¡åˆ—è¡¨",-1)])),_:1,__:[25]})])),t.showCaseDetail?(u(),h("div",{key:4,class:"case-detail-modal",onClick:e[21]||(e[21]=(...n)=>i.closeCaseDetail&&i.closeCaseDetail(...n))},[s("div",{class:"modal-content",onClick:e[20]||(e[20]=B(()=>{},["stop"]))},[s("div",Ae,[s("h3",null,p(t.isEditing?"ç¼–è¾‘æµ‹è¯•ç”¨ä¾‹":"æµ‹è¯•ç”¨ä¾‹è¯¦æƒ…"),1),s("button",{class:"close-btn",onClick:e[10]||(e[10]=(...n)=>i.closeCaseDetail&&i.closeCaseDetail(...n))},"Ã—")]),t.isEditing?(u(),h("div",Ke,[s("div",Qe,[e[38]||(e[38]=s("label",null,"ç”¨ä¾‹ç¼–å·:",-1)),s("span",Xe,p(t.editForm.caseId||`TC${String(t.selectedCaseIndex+1).padStart(3,"0")}`),1)]),s("div",Ye,[e[39]||(e[39]=s("label",null,"æµ‹è¯•åœºæ™¯:",-1)),g(T,{modelValue:t.editForm.scenario,"onUpdate:modelValue":e[11]||(e[11]=n=>t.editForm.scenario=n),type:"textarea",rows:2,placeholder:"è¯·è¾“å…¥æµ‹è¯•åœºæ™¯"},null,8,["modelValue"])]),s("div",Ze,[e[40]||(e[40]=s("label",null,"å‰ç½®æ¡ä»¶:",-1)),g(T,{modelValue:t.editForm.precondition,"onUpdate:modelValue":e[12]||(e[12]=n=>t.editForm.precondition=n),type:"textarea",rows:3,placeholder:"è¯·è¾“å…¥å‰ç½®æ¡ä»¶"},null,8,["modelValue"])]),s("div",$e,[e[41]||(e[41]=s("label",null,"æ“ä½œæ­¥éª¤:",-1)),g(T,{modelValue:t.editForm.steps,"onUpdate:modelValue":e[13]||(e[13]=n=>t.editForm.steps=n),type:"textarea",rows:6,placeholder:"è¯·è¾“å…¥æ“ä½œæ­¥éª¤"},null,8,["modelValue"])]),s("div",es,[e[42]||(e[42]=s("label",null,"é¢„æœŸç»“æœ:",-1)),g(T,{modelValue:t.editForm.expected,"onUpdate:modelValue":e[14]||(e[14]=n=>t.editForm.expected=n),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥é¢„æœŸç»“æœ"},null,8,["modelValue"])]),s("div",ss,[e[43]||(e[43]=s("label",null,"ä¼˜å…ˆçº§:",-1)),g(M,{modelValue:t.editForm.priority,"onUpdate:modelValue":e[15]||(e[15]=n=>t.editForm.priority=n),placeholder:"è¯·é€‰æ‹©ä¼˜å…ˆçº§"},{default:b(()=>[g(S,{label:"P0",value:"P0"}),g(S,{label:"P1",value:"P1"}),g(S,{label:"P2",value:"P2"}),g(S,{label:"P3",value:"P3"})]),_:1},8,["modelValue"])])])):(u(),h("div",ze,[s("div",Be,[e[32]||(e[32]=s("label",null,"ç”¨ä¾‹ç¼–å·:",-1)),s("span",null,p(t.selectedCase.caseId||`TC${String(t.selectedCaseIndex+1).padStart(3,"0")}`),1)]),s("div",Ue,[e[33]||(e[33]=s("label",null,"æµ‹è¯•åœºæ™¯:",-1)),s("p",null,p(t.selectedCase.scenario),1)]),s("div",He,[e[34]||(e[34]=s("label",null,"å‰ç½®æ¡ä»¶:",-1)),s("p",{innerHTML:t.selectedCase.precondition||"æ— "},null,8,je)]),s("div",Oe,[e[35]||(e[35]=s("label",null,"æ“ä½œæ­¥éª¤:",-1)),s("p",{class:"test-steps",innerHTML:t.selectedCase.steps},null,8,Re)]),s("div",Ge,[e[36]||(e[36]=s("label",null,"é¢„æœŸç»“æœ:",-1)),s("p",{innerHTML:t.selectedCase.expected},null,8,We)]),s("div",Je,[e[37]||(e[37]=s("label",null,"ä¼˜å…ˆçº§:",-1)),s("span",{class:I(["priority-tag",(F=t.selectedCase.priority)==null?void 0:F.toLowerCase()])},p(t.selectedCase.priority||"P2"),3)])])),s("div",ts,[t.isEditing?(u(),h(D,{key:1},[s("button",{class:"action-btn save-btn",onClick:e[18]||(e[18]=(...n)=>i.saveEdit&&i.saveEdit(...n)),disabled:t.isSaving},[t.isSaving?(u(),h("span",ls,"ğŸ’¾ ä¿å­˜ä¸­...")):(u(),h("span",ns,"ğŸ’¾ ä¿å­˜"))],8,is),s("button",{class:"action-btn cancel-btn",onClick:e[19]||(e[19]=(...n)=>i.cancelEdit&&i.cancelEdit(...n)),disabled:t.isSaving},"å–æ¶ˆ",8,os)],64)):(u(),h(D,{key:0},[s("button",{class:"action-btn edit-btn",onClick:e[16]||(e[16]=(...n)=>i.startEdit&&i.startEdit(...n))},e[44]||(e[44]=[s("span",null,"âœï¸ ç¼–è¾‘",-1)])),s("button",{class:"action-btn close-btn-footer",onClick:e[17]||(e[17]=(...n)=>i.closeCaseDetail&&i.closeCaseDetail(...n))},"å…³é—­")],64))])])])):k("",!0)])}const cs=q(j,[["render",as],["__scopeId","data-v-931d1da0"]]);export{cs as default};
